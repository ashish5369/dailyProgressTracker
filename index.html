<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daily Progress Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  font-family:Inter,sans-serif;
  background:linear-gradient(135deg,#0f172a,#1e293b);
  color:white;
  padding:30px;
}

h1{text-align:center;margin-bottom:20px;}

.card{
  background:rgba(255,255,255,0.07);
  backdrop-filter:blur(15px);
  padding:20px;
  border-radius:16px;
  margin-bottom:20px;
}

table{
  width:100%;
  border-collapse:collapse;
}

th,td{
  padding:10px;
  text-align:center;
}

th{
  background:rgba(255,255,255,0.1);
}

tr:nth-child(even){
  background:rgba(255,255,255,0.03);
}

input[type=checkbox]{transform:scale(1.2);}
button{
  padding:8px 14px;
  border:none;
  border-radius:8px;
  background:#38bdf8;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>ğŸš€ Architect Daily Progress</h1>

<div class="card">
ğŸ”¥ Streak: <span id="streak">0</span> days |
ğŸ“Š Progress: <span id="progress">0%</span>
</div>

<div class="card">
<table>
<thead>
<tr>
<th>Day</th>
<th>Go</th>
<th>DSA</th>
<th>Build</th>
<th>Complete</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>

<div class="card">
ğŸ§  DSA Total: <span id="dsaTotal">0</span>
<input type="number" id="dsaInput">
<button onclick="addDSA()">Add</button>
</div>

<div class="card">
ğŸ— Architecture Level:
<input type="range" min="0" max="100" id="archSkill" onchange="saveData()">
<span id="archValue">0</span>%
</div>

<script>
const username="ashish5369";
const repo="dailyProgressTracker";
const file="data.json";
let token="";
let data={};

async function loadData(){
  const res=await fetch(`https://api.github.com/repos/${username}/${repo}/contents/${file}`);
  const json=await res.json();
  const content=atob(json.content);
  data=JSON.parse(content);
  data.sha=json.sha;

  if(data.tasks.length===0){
    data.tasks=Array.from({length:30},()=>({go:false,dsa:false,build:false}));
  }
  render();
}

function render(){
  const body=document.getElementById("tableBody");
  body.innerHTML="";
  data.tasks.forEach((task,i)=>{
    const complete=task.go && task.dsa && task.build;
    body.innerHTML+=`
      <tr>
        <td>Day ${i+1}</td>
        <td><input type="checkbox" ${task.go?"checked":""} onchange="toggle(${i},'go')"></td>
        <td><input type="checkbox" ${task.dsa?"checked":""} onchange="toggle(${i},'dsa')"></td>
        <td><input type="checkbox" ${task.build?"checked":""} onchange="toggle(${i},'build')"></td>
        <td>${complete?"âœ…":"âŒ"}</td>
      </tr>
    `;
  });

  updateProgress();
  document.getElementById("dsaTotal").innerText=data.dsa;
  document.getElementById("archSkill").value=data.arch||0;
  document.getElementById("archValue").innerText=data.arch||0;
  document.getElementById("streak").innerText=data.streak||0;
}

function toggle(i,type){
  data.tasks[i][type]=!data.tasks[i][type];
  const today=new Date().toDateString();
  if(data.lastActive!==today){
    data.streak=(data.streak||0)+1;
    data.lastActive=today;
  }
  saveData();
}

function addDSA(){
  data.dsa+=parseInt(document.getElementById("dsaInput").value)||0;
  saveData();
}

function updateProgress(){
  const done=data.tasks.filter(t=>t.go&&t.dsa&&t.build).length;
  const percent=Math.round((done/30)*100);
  document.getElementById("progress").innerText=percent+"%";
}

async function saveData(){
  data.arch=document.getElementById("archSkill").value;

  const content=btoa(JSON.stringify({
    tasks:data.tasks,
    dsa:data.dsa,
    arch:data.arch,
    milestones:data.milestones||{},
    lastActive:data.lastActive,
    streak:data.streak
  },null,2));

  await fetch(`https://api.github.com/repos/${username}/${repo}/contents/${file}`,{
    method:"PUT",
    headers:{
      Authorization:`Bearer ${token}`,
      "Content-Type":"application/json"
    },
    body:JSON.stringify({
      message:"Update progress",
      content:content,
      sha:data.sha
    })
  });

  loadData();
}

token=prompt("Enter GitHub Token");
loadData();
</script>

</body>
</html>